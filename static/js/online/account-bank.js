function practical(){if(m=map,K=$(".borrowmoney em").text(),N=$(".borrowday em").text(),D=$("input[name=ensure_rate][checked]").val(),"100"==D)var eValue="ensure_"+K+"_"+N;else var eValue="credit_"+K+"_"+N;$(".practical em").text(eval(K-m[eValue]).toFixed(2)),$(".t-coup").hide(),$(".poundage em").text(m[eValue]),$(".expire em").text(K),$(".gamount em").text(eval(.01*K*D).toFixed(0)),poundage=m[eValue],$("input[name='poundage']").val(poundage),$(".t-check-btn-active").removeClass("t-check-btn-active"),$(".t-coupon-st1").empty().html("您有<strong>"+seajs.data.vars.num+"</strong>张优惠券</span>")}function prompt_hide(){$(".t-mask").hide(),$("#t-bomb_box_prompt").hide()}function valueOutput(element){var value=element.value;$(element).data("value",value);var output=element.parentNode.getElementsByTagName("output")[0],em=element.parentNode.parentNode.parentNode.getElementsByTagName("em")[0];if(output.innerHTML=value,em.innerHTML=value,a=output.innerHTML,b=output.innerHTML,m=map,K=$(".borrowmoney em").text(),N=$(".borrowday em").text(),D=$("input[name=ensure_rate][checked]").val(),"100"==D)var eValue="ensure_"+K+"_"+N;else var eValue="credit_"+K+"_"+N;$(".practical em").text(eval(K-m[eValue]).toFixed(2)),$(".t-coup").hide(),$(".poundage em").text(m[eValue]),$(".expire em").text(K),$(".gamount em").text(eval(.01*K*D).toFixed(0)),poundage=m[eValue],$("input[name='poundage']").val(poundage),$(".t-check-btn-active").removeClass("t-check-btn-active"),$(".t-coupon-st1").empty().html("您有<strong>"+seajs.data.vars.num+"</strong>张优惠券</span>")}function coupon(money,day){$(".t-bomb_box-6 .t-coupon-card").each(function(index,element){switch($(this).attr("type")){case"1":difference=eval(money-$(this).attr("min_loan"));var id=$(this).attr("id");0>difference?($("#"+id).removeAttr("is"),$(this).addClass("t-expire"),$(this).find(".t-check-btn").removeClass("t-check-btn-active"),$("#t-bomb_box-6").append($(this))):($("#"+id).attr("is","y"),$(this).removeClass("t-expire"));break;case"2":differencemoney=eval(money-$(this).attr("min_loan")),differenceday=day-$(this).attr("day");var id=$(this).attr("id");0>differencemoney||0>differenceday?($("#"+id).removeAttr("is"),$(this).addClass("t-expire"),$(this).find(".t-check-btn").removeClass("t-check-btn-active"),$("#t-bomb_box-6").append($(this))):($("#"+id).attr("is","y"),$(this).removeClass("t-expire"));break;case"3":poundagenum=$(".poundage em").text(),differencemoney=eval(poundagenum-$(this).attr("min_loan"));var id=$(this).attr("id");0>differencemoney?($("#"+id).removeAttr("is"),$(this).addClass("t-expire"),$(this).find(".t-check-btn").removeClass("t-check-btn-active"),$("#t-bomb_box-6").append($(this))):($("#"+id).attr("is","y"),$(this).removeClass("t-expire"))}})}!function(t){"use strict";"function"==typeof define&&define.amd?define(["../jquery.LoadImage"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(){var t=document.createElement("input");return t.setAttribute("type","range"),"text"!==t.type}function i(t,e){var i=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)}function n(t,e){return e=e||100,function(){if(!t.debouncing){var i=Array.prototype.slice.apply(arguments);t.lastReturnVal=t.apply(window,i),t.debouncing=!0}return clearTimeout(t.debounceTimeout),t.debounceTimeout=setTimeout(function(){t.debouncing=!1},e),t.lastReturnVal}}function o(t){return t&&(0===t.offsetWidth||0===t.offsetHeight||t.open===!1)}function s(t){for(var e=[],i=t.parentNode;o(i);)e.push(i),i=i.parentNode;return e}function a(t,e){function i(t){t.open!==void 0&&(t.open=t.open?!1:!0)}var n=s(t),o=n.length,a=[],r=t[e];if(o){for(var l=0;o>l;l++)a[l]=n[l].style.cssText,n[l].style.display="block",n[l].style.height="0",n[l].style.overflow="hidden",n[l].style.visibility="hidden",i(n[l]);r=t[e];for(var h=0;o>h;h++)n[h].style.cssText=a[h],i(n[h])}return r}function r(e,o){if(this.$window=t(window),this.$document=t(document),this.$element=t(e),this.options=t.extend({},u,o),this.polyfill=this.options.polyfill,this.onInit=this.options.onInit,this.onSlide=this.options.onSlide,this.onSlideEnd=this.options.onSlideEnd,this.polyfill&&d)return!1;this.identifier="js-"+l+"-"+h++,this.startEvent=this.options.startEvent.join("."+this.identifier+" ")+"."+this.identifier,this.moveEvent=this.options.moveEvent.join("."+this.identifier+" ")+"."+this.identifier,this.endEvent=this.options.endEvent.join("."+this.identifier+" ")+"."+this.identifier,this.toFixed=(this.step+"").replace(".","").length-1,this.$fill=t('<div class="'+this.options.fillClass+'" />'),this.$handle=t('<div class="'+this.options.handleClass+'" ><p class="t-withdraw2-1 t-withdraw7-1"><span><output>'+this.$element.val()+'</output></p> <div class="t-withdraw2-2 t-withdraw7-1"></div> </div>'),this.$range=t('<div class="'+this.options.rangeClass+'" id="'+this.identifier+'" />').insertAfter(this.$element).prepend(this.$fill,this.$handle),this.$element.css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",opacity:"0"}),this.handleDown=t.proxy(this.handleDown,this),this.handleMove=t.proxy(this.handleMove,this),this.handleEnd=t.proxy(this.handleEnd,this),this.init();var s=this;this.$window.on("resize."+this.identifier,n(function(){i(function(){s.update()},300)},20)),this.$document.on(this.startEvent,"#"+this.identifier+":not(."+this.options.disabledClass+")",this.handleDown),this.$element.on("change."+this.identifier,function(t,e){if(!e||e.origin!==s.identifier){var i=t.target.value,n=s.getPositionFromValue(i);s.setPosition(n)}})}var l="rangeslider",h=0,d=e(),u={polyfill:!0,rangeClass:"rangeslider",disabledClass:"rangeslider--disabled",fillClass:"rangeslider__fill",handleClass:"rangeslider__handle",startEvent:["mousedown","touchstart","pointerdown"],moveEvent:["mousemove","touchmove","pointermove"],endEvent:["mouseup","touchend","pointerup"]};r.prototype.init=function(){this.update(!0),this.$element[0].value=this.value,this.onInit&&"function"==typeof this.onInit&&this.onInit()},r.prototype.update=function(t){t=t||!1,t&&(this.min=parseFloat(this.$element[0].getAttribute("min")||0),this.max=parseFloat(this.$element[0].getAttribute("max")||100),this.value=parseFloat(this.$element[0].value||this.min+(this.max-this.min)/2),this.step=parseFloat(this.$element[0].getAttribute("step")||1)),this.handleWidth=a(this.$handle[0],"offsetWidth"),this.rangeWidth=a(this.$range[0],"offsetWidth"),this.maxHandleX=this.rangeWidth-this.handleWidth,this.grabX=this.handleWidth/2,this.position=this.getPositionFromValue(this.value),this.$element[0].disabled?this.$range.addClass(this.options.disabledClass):this.$range.removeClass(this.options.disabledClass),this.setPosition(this.position)},r.prototype.handleDown=function(t){if(t.preventDefault(),this.$document.on(this.moveEvent,this.handleMove),this.$document.on(this.endEvent,this.handleEnd),!((" "+t.target.className+" ").replace(/[\n\t]/g," ").indexOf(this.options.handleClass)>-1)){var e=this.getRelativePosition(t),i=this.$range[0].getBoundingClientRect().left,n=this.getPositionFromNode(this.$handle[0])-i;this.setPosition(e-this.grabX),e>=n&&n+this.handleWidth>e&&(this.grabX=e-n)}},r.prototype.handleMove=function(t){t.preventDefault();var e=this.getRelativePosition(t);this.setPosition(e-this.grabX)},r.prototype.handleEnd=function(t){t.preventDefault(),this.$document.off(this.moveEvent,this.handleMove),this.$document.off(this.endEvent,this.handleEnd),this.$element.trigger("change",{origin:this.identifier}),this.onSlideEnd&&"function"==typeof this.onSlideEnd&&this.onSlideEnd(this.position,this.value)},r.prototype.cap=function(t,e,i){return e>t?e:t>i?i:t},r.prototype.setPosition=function(t){var e,i;e=this.getValueFromPosition(this.cap(t,0,this.maxHandleX)),i=this.getPositionFromValue(e),this.$fill[0].style.width=i+this.grabX+"px",this.$handle[0].style.left=i+"px",this.setValue(e),this.position=i,this.value=e,this.onSlide&&"function"==typeof this.onSlide&&this.onSlide(i,e)},r.prototype.getPositionFromNode=function(t){for(var e=0;null!==t;)e+=t.offsetLeft,t=t.offsetParent;return e},r.prototype.getRelativePosition=function(t){var e=this.$range[0].getBoundingClientRect().left,i=0;return t.pageX!==void 0?i=t.pageX:t.originalEvent.clientX!==void 0?i=t.originalEvent.clientX:t.originalEvent.touches&&t.originalEvent.touches[0]&&t.originalEvent.touches[0].clientX!==void 0?i=t.originalEvent.touches[0].clientX:t.currentPoint&&t.currentPoint.x!==void 0&&(i=t.currentPoint.x),i-e},r.prototype.getPositionFromValue=function(t){var e,i;return e=(t-this.min)/(this.max-this.min),i=e*this.maxHandleX},r.prototype.getValueFromPosition=function(t){var e,i;return e=t/(this.maxHandleX||1),i=this.step*Math.round(e*(this.max-this.min)/this.step)+this.min,Number(i.toFixed(this.toFixed))},r.prototype.setValue=function(t){t!==this.value&&this.$element.val(t).trigger("input",{origin:this.identifier})},r.prototype.destroy=function(){this.$document.off("."+this.identifier),this.$window.off("."+this.identifier),this.$element.off("."+this.identifier).removeAttr("style").removeData("plugin_"+l),this.$range&&this.$range.length&&this.$range[0].parentNode.removeChild(this.$range[0])},t.fn[l]=function(e){var i=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=t(this),o=n.data("plugin_"+l);o||n.data("plugin_"+l,o=new r(this,e)),"string"==typeof e&&o[e].apply(o,i)})}});for(var $document=$(document),selector="[data-rangeslider],[data-rangeslider-2]",$inputRange=$(selector),i=$inputRange.length-1;i>=0;i--)valueOutput($inputRange[i]);if($document.on("input",selector,function(t){valueOutput(t.target)}),$inputRange.rangeslider({polyfill:!1}),1==seajs.data.vars.available?$(".WellCheckBox").click(function(){$(".WellCheckBoxH").removeClass("WellCheckBoxH"),$(this).addClass("WellCheckBoxH"),$("input[name=ensure_rate]").attr("checked",!1),$(this).children("input").attr("checked",!0),practical()}):$(".prompt").click(function(){$("#t-bomb_box_prompt").show(),$(".t-mask").show()}),K=$(".borrowmoney em").text(),couponId=seajs.data.vars.couponId,""!=couponId&&0!=couponId&&null!=couponId){couponAmount=seajs.data.vars.couponAmount;var practic=(parseFloat(K-poundage)+parseFloat(couponAmount)).toFixed(2);practic=practic>K?K:practic,$(".practical em").text(practic),$(".t-coupon-st1").empty().html("<span class='t-coupon-st1' style='color:#e00000;'>已使用"+seajs.data.vars.amount_start+"元优惠券<input type='hidden' name='couponid' value='"+seajs.data.vars.ordercoupinid+"' ></span>"),$(".t-coup").show()}else $(".t-coup").hide();$(".t-close-btn").on("touched click",function(){$("#t-box_alert").hide(),$(".t-mask").hide()}),$("#show-card").on("touched click",function(t){t.stopPropagation(),$("#t-box_alert").show(),$(".t-mask").show();var e=$(".borrowmoney em").text(),i=$(".borrowday em").text();alertH("#t-bomb_box"),coupon(e,i)}),$(".t-red").on("touched click",function(){$(".t-coup").hide(),$(".t-mask").hide(),$("#t-box_alert").hide(),$(".t-coupon-st1").empty().html("您有<strong>"+seajs.data.vars.num+"</strong>张优惠券</span>"),$(".t-check-btn").removeClass("t-check-btn-active"),$(".practical em").text(parseFloat(K-poundage).toFixed(2))}),$(".t-coupon-card").on("click",function(){var t=$(this).attr("is");"y"==t&&(id=$(this).attr("id"),money=$(this).attr("data"),$(".t-check-btn").removeClass("t-check-btn-active"),$("#btn"+id).addClass("t-check-btn-active"),$("#t-box_alert").hide(),$(".t-mask").hide(),$(".t-coupon-st1").empty().html("<span style='color:#e00000;'>已使用"+money+"元优惠券</span><input type='hidden' name='couponid' value='"+id+"' >"),$(".t-coup").show(),practical=$(".borrowmoney em").text(),zmoney=(parseFloat(K-poundage)+parseFloat(money)).toFixed(2),parseFloat(zmoney).toFixed(2)>parseFloat(K).toFixed(2)?$(".practical em").text(K):$(".practical em").text(zmoney),parseInt(money-poundage)>0?$(".t-font-small em").text("-"+poundage):$(".t-font-small em").text("-"+money))}),$(document).ready(function(){$("a").is(".t-check-btn-is")&&$(".t-check-btn-is").addClass("t-check-btn-active"),$(".t-red-btn-show").click(function(){$(".t-mask").show(),$("#t-bomb_box_prompt").show()})});