(function(n){var e={company:{10001:"公司名称不能为空",10002:"请输入有效的公司名称"},companydetail:{10001:"公司地址不能为空",10002:"请输入有效的公司地址"},family:{10001:"家庭住址不能为空",10002:"请输入有效的家庭住址"},contact:{10001:"名称不能为空",10002:"名称格式不对",10003:"手机号不能为空",10004:"手机号格式不对"},contact_people:{parent:"父母",brother:"兄弟姐妹",spouse:"配偶",children:"子女",colleague:"同事",classmate:"同学",friend:"朋友"},zname:{10001:"姓名不能为空",10002:"请输入有效的姓名"}};n(function(){n(".pwdTip input").eq(0).blur(function(){n(".pwdTip input").eq(1).val(n(this).val())}),n(".pwdTip  input").eq(1).blur(function(){n(".pwdTip  input").eq(0).val(n(this).val())}),n("input[name='username']").blur(function(){t.username(this.value)}),n("input[name='usernamec']").blur(function(){t.username(this.value,2)}),n("input[name='authcode']").blur(function(){t.authcode(this.value)}),n("input[name='comauthcode']").blur(function(){t.authcode(this.value,3)}),n("input[name='password']").blur(function(){t.pwd(this.value)}),n("input[name='passwordrepeat']").blur(function(){t.pwd(this.value,1)}),n("input[name='phone']").blur(function(){t.phone(this.value)}),n("input[name='passphone']").blur(function(){t.passphone(this.value)}),n("input[name='zname']").blur(function(){t.zname(this.value,"zname")}),n("input[name='code']").blur(function(){t.code(this.value)}),n("input[name='comname']").blur(function(){t.details_four(this.value,"company")}),n("input[name='comtell']").blur(function(){t.tell(this.value,2)}),n("input[name='email']").blur(function(){t.email(this.value)}),n("input[name='verification ']").blur(function(){t.isnull(this.value,"公司联系电话不能为空")}),n("input[name='connamef']").blur(function(){t.zname(this.value,"contact")}),n("input[name='comdetailaddre']").blur(function(){t.details_two(this.value,"companydetail")}),n("input[name='detailaddress']").blur(function(){t.details_two(this.value,"family")}),n("input[name='dynamiccode']").blur(function(){t.dynamiccode(this.value)}),n("input[name='connames']").blur(function(){t.zname(this.value,"contact")}),n("input[name='comtellf']").blur(function(){t.phone(this.value)}),n("input[name='comtells']").blur(function(){t.phone(this.value)});var a=60;n(".t-pwd-code").click(function(){var e=n("input[name='email']").val();return 1!=t.email(e)?!1:(timer(),n.ajax({url:sendcodeurl,type:"POST",data:{email:e},dataType:"json",async:!1,success:function(e){return 1==e.status?(t.tips(),!0):(t.waring(e.msg),n(".t-pwd-code").text("重发验证码"),n(".t-pwd-code").removeAttr("disabled"),clearInterval(timer),!1)},error:function(){return t.waring("网络异常！"),n(".t-pwd-code").text("重发验证码"),n(".t-pwd-code").removeAttr("disabled"),clearInterval(timer),!0}}),void 0)}),n(".t-red-company").click(function(){t.lockup();var e=n("input[name='comname']").val(),a=n("#province1").val(),i=n("#city1").val(),r=n("#district1").val(),u=a+","+i+","+r,o=n("input[name='comdetailaddre']").val(),c=n("input[name='comtell']").val();return 1!=t.details_four(e,"company")?(t.unlock(),!1):1!=t.isnull(u,"公司地址不能为空")?(t.unlock(),!1):1!=t.details_two(o,"companydetail")?(t.unlock(),!1):1!=t.tell(c,2)?(t.unlock(),!1):(n.ajax({url:companyinfourl,type:"POST",data:{comname:e,comaddress:u,comdetailaddre:o,comtell:c},dataType:"json",async:!0,beforeSend:function(){},success:function(n){return 1!=n.status?(alert(n.msg),t.waring(n.msg),t.unlock(),!1):(t.unlock(),t.tips(),location.href="/RegisterApp/Contacts",void 0)},error:function(){return t.unlock(),t.tips("表单校验失败"),!1}}),void 0)}),n("#contactForm").submit(function(){t.lockup();var e=n(this).serializeArray(),a="";return n.each(e,function(n){switch(this.name){case"conname":element=1!=t.zname(this.value,"zname")?!1:!0;break;case"contact":element=1!=t.isnull(this.value,"请选择您与紧急联系人的关系")?!1:!0;break;case"ccomtell":element=1!=t.phone(this.value)?!1:!0;break;default:element=!1}if(0==element)return!1;switch(n){case 0:case 1:case 2:a+="&"+this.name+"1="+this.value;break;case 3:case 4:case 5:a+="&"+this.name+"2="+this.value}}),0==element?(t.unlock(),!1):(n.ajax({url:contactsourl,type:"POST",data:a,dataType:"json",async:!1,beforeSend:function(){},success:function(n){n.status===!0?(unique=n.status,t.unlock(),t.tips(),unique=!0):(t.waring(n.msg),t.unlock(),unique=!1)},error:function(){t.unlock(),t.tips("表单校验失败"),unique=!1}}),1==unique?(location.href=Jumpourl,!1):!1)}),n("#contact-select1").change(function(){if("spouse"==this.value){var t='<option value="0" selected="selected">请选择</option>';n.each(e.contact_people,function(n,e){"spouse"!=n&&(t+="<option value="+n+">"+e+"</option>")}),n("#contact-select2").html(t)}}),n("#contact-select2").change(function(){if("spouse"==this.value){var t='<option value="0" selected="selected">请选择</option>';n.each(e.contact_people,function(n,e){"spouse"!=n&&(t+="<option value="+n+">"+e+"</option>")}),n("#contact-select1").html(t)}}),n(".t-button").click(function(){t.lockup_credit("正在读取数据,请等待1-2分钟");var e=n("input[name='type']").val(),i=null;if(1!=t.isnull(e,"异常错误请刷新"))return t.unlock(),!1;if("sj"==e){var r=n("input[name='phone']").val(),u=n("input[name='passphone']").val();if(1==n(".iconcode").data("code")){if(1!=t.is_searchcode(u,""))return t.unlock(),!1;if(i=n("input[name='search_password']").val(),1!=t.isnull(i,"服务密码不能为空"))return t.unlock(),!1;if(1!=t.passphone(i,"服务密码必须是6-8位整数"))return t.unlock(),!1}else if(1!=t.passphone(u,"服务密码必须是6-8位整数"))return t.unlock(),!1}else{var o=n("input[name='usernamec']").val(),c=n("input[name='password']").val();if(1!=t.isnull(o,"账号不能为空！"))return t.unlock(),!1;if(1!=t.pwd(c))return t.unlock(),!1;if(1!=t.dynamiccode(s))return t.unlock(),!1}if(0!=sendtime){var s=n("input[name='dynamiccode']").val()?n("input[name='dynamiccode']").val():null;if(1!=t.isnull(s,"动态验证码不能为空"))return t.unlock(),!1;if(1!=t.is_number(s))return t.unlock(),!1}"sj"==e?(url=0==sendtime?creditzhurl:1==sendtime?dynamicVerifyurl:dynamicVerifyurl,post_data="&phone="+r+"&passphone="+u+"&dynamiccode="+s+"&type="+e+"&search_password="+i):(url=creditzhurl,post_data="&usernamec="+o+"&password="+c+"&type="+e+"&dynamiccode="+s),n.ajax({url:url,type:"POST",data:post_data,dataType:"json",async:!0,beforeSend:function(){},success:function(i){return 1!=i.status?5106==i.code?(sendtime=1,t.is_time(a),t.unlock(),n(".dynamiccode").show(),t.waring(i.msg),!1):(5080==i.code&&(location.href="/RegisterApp/CreditAccounts"),5084==i.code?(t.unlock(),n(".t-mask").show(),n("#t-bomb_box").show(),n("#t-bomb_box-6").text(i.msg),!1):10002==i.code?(t.unlock(),t.waring(i.msg),!1):(t.unlock(),t.waring(i.msg),!1)):(t.unlock(),t.tips(),location.href="sj"==e?"/RegisterApp/CreditAccounts":"/RegisterApp/CreditAccounts",void 0)},error:function(){return t.unlock(),t.tips("表单校验失败"),!1}})}),n(".t-pwd-code1").click(function(){t.lockup_credit("正在获取验证码,请等待1-2分钟");var e=n("input[name='type']").val(),i=null;if(1!=t.isnull(e,"异常错误请刷新"))return t.unlock(),!1;var r=n("input[name='phone']").val(),u=n("input[name='passphone']").val();if(1!=t.phone(r))return t.unlock(),!1;if(1==n(".iconcode").data("code")){if(1!=t.is_searchcode(u,""))return t.unlock(),!1;if(i=n("input[name='search_password']").val(),1==t.isnull(i,"")&&1!=t.passphone(i,"服务密码必须是6-8位整数"))return t.unlock(),!1}else if(1!=t.passphone(u,"服务密码必须是6-8位整数"))return t.unlock(),!1;0==sendtime?(url=creditzhurl,post_data="&phone="+r+"&passphone="+u+"&type="+e+"&search_password="+i):1==sendtime?(url=dynamicSendurl,post_data="&mobile="+r+"&passphone="+u+"&search_password="+i):(url=dynamicSendurl,post_data="&mobile="+r+"&passphone="+u+"&search_password="+i),n.ajax({url:url,type:"POST",data:post_data,dataType:"json",async:!0,success:function(e){return 1==e.status?(t.unlock(),t.tips(),sendtime=1,t.is_time(a),!0):5080!=e.code?(t.unlock(),t.waring(e.msg),n(".t-pwd-code1").text("重发验证码"),n(".t-pwd-code1").removeAttr("disabled"),!1):(location.href="/RegisterApp/Sesamecredit",void 0)},error:function(){return t.unlock(),t.waring("网络异常！"),n(".t-pwd-code1").text("重发验证码"),n(".t-pwd-code1").removeAttr("disabled"),!0}})})});var t={username:function(e,a){e=n.trim(e);var i=/^(13\d|14[57]|15[012356789]|18\d|17[01678])\d{8}$/;if(""==e||null==e)return t.waring("请输入手机号/用户名"),!1;if(2==a);else if(!e.match(i))return t.waring("用户名是手机号"),!1;return t.tips(),!0},isnull:function(e,a){var e=n.trim(e);return""==e||void 0==e||null==e||0==e?(t.waring(a),!1):(t.tips(),!0)},tell:function(e,a){var e=n.trim(e),i=/(^[0-1]{1}\d{10}$)|(^1[34578]\d{9}$)|(^[0-1]{1}\d{11}$)/;return""==e?(2==a?t.waring("公司联系电话不能为空"):t.waring("家庭电话不能为空"),!1):e.match(i)?(t.tips(),!0):(2==a?t.waring("请输入有效的公司联系电话"):t.waring("请输入有效的家庭电话"),!1)},email:function(e){var e=n.trim(e),a=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;return""==e?(t.waring("请输入邮箱"),!1):e.match(a)?(t.tips(),!0):(t.waring("邮箱格式不正确，请重新输入"),!1)},is_time:function(e){timer=setInterval(function(){e--,e>0?(n(".t-pwd-code1").text(e+"秒后重发"),n(".t-pwd-code1").attr("disabled","disabled"),n(".t-pwd-code1").css("background","gainsboro")):(e=60,n(".t-pwd-code1").text("重发验证码"),n(".t-pwd-code1").removeAttr("disabled"),n(".t-pwd-code1").css("background","#ff7200"),clearInterval(timer))},1e3)},is_number:function(e){var e=n.trim(e),a=/^[0-9a-zA-Z]{0,10}$/;return""==e?(t.waring("请输入动态验证码"),!1):e.match(a)?(t.tips(),!0):(t.waring("动态验证码格式不正确，请重新输入"),!1)},is_searchcode:function(e){var e=n.trim(e),a=/[0-9a-zA-Z]*/;return""==e?(t.waring("请输入网站密码"),!1):e.match(a)?(t.tips(),!0):(t.waring("网站密码格式不正确，请重新输入"),!1)},phone:function(e){var e=n.trim(e),a=/^(13\d|14[57]|15[012356789]|18\d|17[01678])\d{8}$/;return""==e?(t.waring("请输入手机号码"),!1):e.match(a)?(t.tips(),!0):(t.waring("请输入有效手机号码"),!1)},passphone:function(n,e){var a=/(^(\d{6})$)|(^(\d{7})$)|(^(\d{8})$)/i;return n.match(a)?(t.tips(),!0):(t.waring(e),!1)},aggreement:function(n){return n?(t.tips(),!0):(t.waring("请同意协议"),!1)},zname:function(a,i){a=n.trim(a);var r=/^[\u4e00-\u9fa5]{2,}$/;return""==a||null==a?(t.waring(e[i][10001]),!1):a.match(r)?(t.tips(),!0):(t.waring(e[i][10002]),!1)},cname:function(a,i){a=n.trim(a);var r=/([a-zA-Z0-9]{0,})[\u4e00-\u9fa5]{4,}([a-zA-Z0-9]{0,})/;return""==a||null==a?(t.waring(e[i][10001]),!1):a.match(r)?(t.tips(),!0):(t.waring(e[i][10002]),!1)},namerule:function(a,i){a=n.trim(a);var r=/([a-zA-Z0-9]{0,})[\u4e00-\u9fa5]{4,}([a-zA-Z0-9]{0,})|([a-zA-Z0-9]{0,})[\u4e00-\u9fa5]{3,}([a-zA-Z0-9]{0,})[\u4e00-\u9fa5]{1,}([a-zA-Z0-9]{0,})|([a-zA-Z0-9]{0,})[\u4e00-\u9fa5]{2,}([a-zA-Z0-9]{0,})[\u4e00-\u9fa5]{2,}([a-zA-Z0-9]{0,})|([a-zA-Z0-9]{0,})[\u4e00-\u9fa5]{1,}([a-zA-Z0-9]{0,})[\u4e00-\u9fa5]{3,}([a-zA-Z0-9]{0,})/;return""==a||null==a?(t.waring(e[i][10001]),!1):a.match(r)?(t.tips(),!0):(t.waring(e[i][10002]),!1)},details_four:function(a,i){a=n.trim(a);var r=/([a-zA-Z0-9]{0,})[\u4e00-\u9fa5]{4,}([a-zA-Z0-9]{0,})|([a-zA-Z0-9]{0,})[\u4e00-\u9fa5]{3,}([a-zA-Z0-9]{0,})[\u4e00-\u9fa5]{1,}([a-zA-Z0-9]{0,})|([a-zA-Z0-9]{0,})[\u4e00-\u9fa5]{2,}([a-zA-Z0-9]{0,})[\u4e00-\u9fa5]{2,}([a-zA-Z0-9]{0,})|([a-zA-Z0-9]{0,})[\u4e00-\u9fa5]{1,}([a-zA-Z0-9]{0,})[\u4e00-\u9fa5]{3,}([a-zA-Z0-9]{0,})/;return""==a||null==a?(t.waring(e[i][10001]),!1):a.match(r)?(t.tips(),!0):(t.waring(e[i][10002]),!1)},details_two:function(a,i){a=n.trim(a);var r=/([a-zA-Z0-9]{0,})[\u4e00-\u9fa5]{2,}([a-zA-Z0-9]{0,})|([a-zA-Z0-9]{0,})[\u4e00-\u9fa5]{1,}([a-zA-Z0-9]{0,})[\u4e00-\u9fa5]{1,}([a-zA-Z0-9]{0,})|([a-zA-Z0-9]{0,})[\u4e00-\u9fa5]{0,}([a-zA-Z0-9]{0,})[\u4e00-\u9fa5]{2,}([a-zA-Z0-9]{0,})/;return""==a||null==a?(t.waring(e[i][10001]),!1):a.match(r)?(t.tips(),!0):(t.waring(e[i][10002]),!1)},authcode:function(e,a){if(e=n.trim(e),""==e||null==e)return 2==a?t.waring("请填写邮箱验证码"):3==a?t.waring("请填写验证码"):t.waring("请填写手机验证码"),!1;if(3==a){if(6!=e.length)return t.waring("验证码必须是六位整数"),!1}else if(4!=e.length)return 2==a?t.waring("请填写正确邮箱验证码"):t.waring("请填写正确手机验证码"),!1;return t.tips(),!0},dynamiccode:function(e){if(e=n.trim(e),e.length>0){var a=/[0-9]{6,}/;if(!e.match(a))return t.waring("动态验证码格式错误（6位以上数字组合）"),!1}return t.tips(),!0},code:function(e){e=n.trim(e);var a=/^(\d{17}X|\d{18})$/i;return""==e||null==e?(t.waring("身份证账号不能为空"),!1):e.match(a)?(t.tips(),!0):(t.waring("身份证账号格式错误"),!1)},pwd:function(e,a){if(1==a){e=n.trim(e);var i=/^(([a-z]+[0-9]+)|([0-9]+[a-z]+))[a-z0-9]*$/i;return""==e?(t.waring("密码不能为空"),!1):e.match(i)?6>e.length||e.length>16?(t.waring("密码位数不正确"),!1):e!=n("input[name='password']").val()?(t.waring("两次密码不相同！"),!1):(t.tips(),!0):(t.waring("登录密码（6-20位字母数字组合）"),!1)}e=n.trim(e);var i=/^(([a-z]+[0-9]+)|([0-9]+[a-z]+))[a-z0-9]*$/i;return""==e?(t.waring("密码不能为空"),!1):e.match(i)?6>e.length||e.length>16?(t.waring("密码位数不正确"),!1):(t.tips(),!0):(t.waring("登录密码（6-16位字母数字组合）"),!1)},tips:function(){n(".t-error").text("")},waring:function(e){n(".t-error").text(e)},lockup:function(){n(".t-red-btn").addClass("t-gray-btn"),n(".t-red-btn").attr("disabled",!0),n(".t-red-btn").removeClass("t-red-btn"),load=layer.load(2,{shade:!1}),n(".t-mask").show()},unlock:function(){n(".t-gray-btn").addClass("t-red-btn"),n(".t-red-btn").attr("disabled",!1),n(".t-gray-btn").removeClass("t-gray-btn"),layer.close(load),n(".t-mask").hide()},lockup_credit:function(e){n(".t-red-btn").addClass("t-gray-btn"),n(".t-red-btn").attr("disabled",!0),n(".t-red-btn").removeClass("t-red-btn"),load=layer.msg(e,{time:-1,icon:16,offset:["210px","60px"]}),n(".t-mask").show()}}})(jQuery);